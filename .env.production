# Production Environment Configuration for Privacy-Preserving Agent Finetuner
# IMPORTANT: Update all passwords and secrets before deployment

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Application settings
API_HOST=0.0.0.0
API_PORT=8080
WORKERS=4
MAX_CONNECTIONS=1000
WORKER_CLASS=uvicorn.workers.UvicornWorker
LOG_LEVEL=info
ACCESS_LOG=true

# Environment
ENVIRONMENT=production
DEBUG=false
DEVELOPMENT_MODE=false

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Privacy settings
PRIVACY_LEVEL=high
AUDIT_LOGGING=true
SECURITY_MONITORING=true
ENCRYPTION_AT_REST=true
TLS_ENABLED=false  # Handled by load balancer

# Secrets (CHANGE THESE IN PRODUCTION!)
SECRET_KEY=your-super-secret-key-change-this-in-production
JWT_SECRET_KEY=your-jwt-secret-key-change-this-in-production
ENCRYPTION_KEY=your-encryption-key-32-chars-long

# CORS settings
CORS_ORIGINS=https://yourdomain.com,https://api.yourdomain.com
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=*

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL settings
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=privacy_finetuner
POSTGRES_USER=privacy_user
POSTGRES_PASSWORD=your-secure-postgres-password-change-this

# Database URL (constructed from above)
DATABASE_URL=postgresql://privacy_user:your-secure-postgres-password-change-this@postgres:5432/privacy_finetuner

# Connection pool settings
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=30
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Redis settings
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your-secure-redis-password-change-this
REDIS_URL=redis://:your-secure-redis-password-change-this@redis:6379/0

# Cache settings
REDIS_MAX_CONNECTIONS=100
CACHE_TTL=3600
CACHE_DEFAULT_TIMEOUT=300

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Prometheus metrics
PROMETHEUS_METRICS=true
PROMETHEUS_PORT=9090
ENABLE_PROMETHEUS=true

# Health checks
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_TIMEOUT=30

# Performance monitoring
PERFORMANCE_PROFILING=true
METRICS_COLLECTION=true

# Logging
STRUCTURED_LOGGING=true
LOG_FORMAT=json
LOG_ROTATION=true
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=10

# OpenTelemetry (optional)
OTEL_ENABLED=false
OTEL_ENDPOINT=http://jaeger:14268/api/traces
OTEL_SERVICE_NAME=privacy-finetuner
OTEL_ENVIRONMENT=production

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# Email service (for notifications)
SMTP_HOST=smtp.yourdomain.com
SMTP_PORT=587
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=your-smtp-password
SMTP_TLS=true
SMTP_SSL=false

# Object storage (S3-compatible)
S3_ENDPOINT=https://s3.amazonaws.com
S3_BUCKET=privacy-finetuner-models
S3_ACCESS_KEY=your-s3-access-key
S3_SECRET_KEY=your-s3-secret-key
S3_REGION=us-east-1

# Message queue (optional)
CELERY_BROKER_URL=redis://:your-secure-redis-password-change-this@redis:6379/1
CELERY_RESULT_BACKEND=redis://:your-secure-redis-password-change-this@redis:6379/2

# =============================================================================
# MACHINE LEARNING CONFIGURATION
# =============================================================================

# Model settings
DEFAULT_MODEL=microsoft/DialoGPT-small
MODEL_CACHE_DIR=/app/models
MAX_MODEL_SIZE=4GB
MODEL_DOWNLOAD_TIMEOUT=3600

# Training settings
DEFAULT_BATCH_SIZE=8
DEFAULT_LEARNING_RATE=5e-5
DEFAULT_EPOCHS=3
MAX_TRAINING_TIME=7200  # 2 hours

# Privacy settings
DEFAULT_EPSILON=1.0
DEFAULT_DELTA=1e-5
DEFAULT_NOISE_MULTIPLIER=0.5
MAX_GRAD_NORM=1.0

# GPU settings
CUDA_VISIBLE_DEVICES=0,1,2,3
GPU_MEMORY_FRACTION=0.8
MIXED_PRECISION=true

# =============================================================================
# SCALING AND PERFORMANCE
# =============================================================================

# Async settings
ASYNC_WORKERS=4
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT=300

# Memory management
MAX_MEMORY_USAGE=8GB
MEMORY_MONITORING=true
GC_THRESHOLD=0.8

# Distributed training
DISTRIBUTED_TRAINING=false
WORLD_SIZE=1
LOCAL_RANK=0

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================

# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE=s3://privacy-finetuner-backups

# Disaster recovery
DR_ENABLED=false
DR_REGION=us-west-2
DR_REPLICATION_ENABLED=false

# =============================================================================
# COMPLIANCE AND GOVERNANCE
# =============================================================================

# Regulatory compliance
GDPR_COMPLIANCE=true
CCPA_COMPLIANCE=true
HIPAA_COMPLIANCE=false
SOC2_COMPLIANCE=true

# Data retention
DATA_RETENTION_DAYS=365
LOG_RETENTION_DAYS=90
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years

# Privacy controls
ANONYMIZATION_ENABLED=true
PSEUDONYMIZATION_ENABLED=true
RIGHT_TO_BE_FORGOTTEN=true

# =============================================================================
# CONTAINER AND INFRASTRUCTURE
# =============================================================================

# Container settings
CONTAINER_MEMORY_LIMIT=4GB
CONTAINER_CPU_LIMIT=2.0
CONTAINER_RESTART_POLICY=unless-stopped

# Network settings
NETWORK_TIMEOUT=30
MAX_CONNECTIONS_PER_HOST=100
DNS_TIMEOUT=5

# File system
MAX_UPLOAD_SIZE=100MB
TEMP_DIR=/tmp
DATA_DIR=/var/lib/privacy-finetuner

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# GitHub integration (for model versioning)
GITHUB_TOKEN=your-github-token
GITHUB_REPOSITORY=your-org/privacy-models

# Slack notifications (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
SLACK_CHANNEL=#privacy-alerts

# HuggingFace Hub
HUGGINGFACE_TOKEN=your-huggingface-token
HUGGINGFACE_CACHE_DIR=/app/.cache/huggingface

# Weights & Biases (optional)
WANDB_API_KEY=your-wandb-api-key
WANDB_PROJECT=privacy-finetuner
WANDB_ENTITY=your-organization

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Experimental features
QUANTUM_OPTIMIZATION=true
ADAPTIVE_PRIVACY_SCHEDULING=true
DISTRIBUTED_PRIVACY_OPTIMIZATION=true
ADVANCED_SECURITY_MONITORING=true

# Beta features
FEDERATED_LEARNING=false
HOMOMORPHIC_ENCRYPTION=false
SECURE_MULTIPARTY_COMPUTATION=false

# Legacy features
LEGACY_API_SUPPORT=false
DEPRECATED_ENDPOINTS=false

# =============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# =============================================================================

# HAProxy stats
HAPROXY_STATS_PASSWORD=your-haproxy-stats-password

# Grafana
GRAFANA_PASSWORD=your-grafana-admin-password

# PostgreSQL superuser (for maintenance)
POSTGRES_ROOT_PASSWORD=your-postgres-root-password

# SSL/TLS certificates (if using HTTPS)
SSL_CERT_PATH=/etc/ssl/certs/privacy-finetuner.crt
SSL_KEY_PATH=/etc/ssl/private/privacy-finetuner.key
SSL_CA_PATH=/etc/ssl/certs/ca-certificates.crt

# =============================================================================
# DEVELOPMENT AND TESTING OVERRIDES (DO NOT USE IN PRODUCTION)
# =============================================================================

# Development settings (keep false in production)
ENABLE_DEBUG_TOOLBAR=false
ENABLE_PROFILER=false
MOCK_EXTERNAL_SERVICES=false
SKIP_MIGRATIONS=false
SEED_DATABASE=false

# Testing settings (keep false in production)
TEST_MODE=false
PYTEST_MARKERS=
COVERAGE_THRESHOLD=80

# =============================================================================
# NOTES FOR DEPLOYMENT
# =============================================================================

# 1. Update all passwords and secrets marked with "change-this"
# 2. Configure proper SSL/TLS certificates
# 3. Set up monitoring and alerting
# 4. Configure backup and disaster recovery
# 5. Review and adjust resource limits
# 6. Validate compliance requirements
# 7. Test all integrations before going live
# 8. Set up proper access controls and permissions
# 9. Configure log aggregation and monitoring
# 10. Implement proper CI/CD pipeline

# =============================================================================
# SECURITY WARNINGS
# =============================================================================

# WARNING: This file contains sensitive configuration. Ensure:
# - File permissions are set to 600 (readable only by owner)
# - File is not committed to version control with real secrets
# - Secrets are managed using a proper secret management system
# - Regular rotation of passwords and API keys
# - Monitoring for unauthorized access to this file